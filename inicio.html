<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Analizador de Texto</title>
    <link rel="stylesheet" href="estilos.css" />
</head>
<body>
    <table>
        <tr>
            <td><h2>Analizador de texto</h2></td>
        </tr>
        <tr>
            <td class="tdp">
                <span id="caracteres">caracteres: </span> | 
                <span id="caracteresSinEspacios">caracteres sin espacios: </span> |
                <span id="numeroPalabras">Número de palabras: </span>
            </td>
        </tr>
        <tr>
            <td class="tdp">
                <span id="numeros">numeros: </span> | 
                <span id="sumaNumeros">suma de neumeros: </span> |
                <span id="promedioLongitud">promedio Longitud: </span>
            </td>
        </tr>
        <tr>
            <td>
                <textarea class="textArea" name="textoUsuario" rows="4" cols="50"></textarea>
            </td>
        </tr>
    </table>

    <div><button id="limpiarMetricas">Limpiar métricas</button></div>

    <!-- Importar el módulo analizador directamente en HTML -->
    
    <script type="module">

        import { analizador } from "./funciones.js";
        // Dom ocupo queryselector para seleccionar el textarea y  para el boton  limpiar (getElementById)
        const textarea = document.querySelector("textarea.textArea");
        const buttonLimpiar = document.getElementById("limpiarMetricas");

       

        const  limpiarMetricas =()=> {
            textarea.value = "";
            const spans = document.querySelectorAll(".tdp span");
            spans.forEach(span => (span.textContent = `${span.id}: `));
            document.getElementById("promedioLongitud").textContent = "promedio Longitud: ";
        }

        const analizadorText=()=> {
            const textoIngresado = textarea.value;
            const wordCount = analizador.getWordCount(textoIngresado);
            const charCount = analizador.getCharacterCount(textoIngresado);
            const charCountNoSpaces = analizador.getCharacterCountExcludingSpaces(textoIngresado);
            const numberCount = analizador.getNumberCount(textoIngresado);
            const addNumberCount = analizador.getNumerosSum(textoIngresado);
            const getAverageWordLength = analizador.getAverageWordLength(textoIngresado);

            const spans = document.querySelectorAll("span");
            spans[0].textContent = `caracteres: ${charCount}`;
            spans[1].textContent = `caracteres sin espacios: ${charCountNoSpaces}`;
            spans[2].textContent = `Número de palabras: ${wordCount}`;
            spans[3].textContent = `numeros: ${numberCount}`;
            spans[4].textContent = `suma de neumeros: ${addNumberCount}`;
            spans[5].textContent = `promedio Longitud: ${getAverageWordLength}`;
        }

        // Agregar eventos de cambio al textarea keyup

        textarea.addEventListener("keyup", () => {
            analizadorText();
        });

        // Agregar evento de clic al botón limpiar

        buttonLimpiar.addEventListener("click", () => {
            limpiarMetricas();
        });
       
    </script>
</body>
</html>

