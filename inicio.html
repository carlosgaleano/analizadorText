<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="estilos.css">
</head>
<body>
    <table>
        <tr>
            <td><h2>Analizador de texto</h2></td>
        </tr>
        <tr>
            <td class="tdp">
                <span>caracteres</span> | 
                <span>caracteres sin espacios</span> | 
                <span>Número de palabras</span>
            </td>
        </tr>
        <tr>
            <td class="tdp">
                <span>numeros</span> | 
                <span>suma de numeros</span> | 
                <span>promedio  Longitud</span>
            </td>
        </tr>
        <tr>
            <td> <textarea class="textArea" name="textoUsuario" rows="4" cols="50"></textarea> </td>
        </tr>
    </table>

     <div><button onclick="limpiarTextArea()">Limpiar</button></div>
     <div><button onclick="limpiarMétricas()">Limpiar métricas</button></div>

    <!-- Importar el módulo analizador directamente en HTML -->
    <script type="module">
        // Importar el objeto analizador
        import { analizador } from './funciones.js';

        // Obtener el elemento del textarea usando querySelector
        const textarea = document.querySelector('textarea.textArea');

        // Limpiar el textarea
        window.limpiarTextArea = () => {
            textarea.value = '';
            analizadorText();
        };

        // Limpiar métricas
        window.limpiarMétricas = () => {
            textarea.value = '';
            // Actualizar el contenido de los elementos span directamente
            const spans = document.querySelectorAll('.tdp span');
            spans[0].textContent = 'caracteres: ';
            spans[1].textContent = 'caracteres sin espacios: ';  
            spans[2].textContent = 'Número de palabras: ';
            spans[3].textContent = 'numeros: ';
            spans[4].textContent = 'suma de neumeros: ';
            spans[5].textContent = 'promedio  Longitud: ';
        };

        const analizadorText = () => {
            const textoIngresado = textarea.value;

            // Obtener el número de palabras utilizando el analizador
            const wordCount = analizador.getWordCount(textoIngresado);

            // Obtener el numero de caracteres utilizando el analizador
            const charCount = analizador.getCharacterCount(textoIngresado);

            const charCountNoSpaces = analizador.getCharacterCountExcludingSpaces(textoIngresado);

            const numberCount = analizador.getNumberCount(textoIngresado);

            const addNumberCount = analizador.getNumerosSum(textoIngresado);

            const getAverageWordLength = analizador.getAverageWordLength(textoIngresado);

            // Actualizar el contenido de los elementos span directamente
            const spans = document.querySelectorAll('span');
            spans[0].textContent = 'caracteres: ' + charCount;
            spans[1].textContent = 'caracteres sin espacios: ' + charCountNoSpaces;  
            spans[2].textContent = 'Número de palabras: ' + wordCount;
            spans[3].textContent = 'numeros: ' + numberCount;
            spans[4].textContent = 'suma de neumeros: ' + addNumberCount;
            spans[5].textContent = 'promedio  Longitud: ' + getAverageWordLength;
        };

        // Agregar un evento de cambio al textarea
        textarea.addEventListener('input', function () {
          // Obtener el valor del textarea
          analizadorText();
        });
    </script>
</body>
</html>
